{"version":3,"sources":["Frame.svg","Contract.js","App.js","index.js","../node_modules/caver-js/packages sync /^/.//.*//src//index/.js$"],"names":["KIP7_CONTRACT","constant","inputs","internalType","name","type","outputs","payable","stateMutability","getKIP7Contract","web3","contractAddress","eth","Contract","callTransfer","address","Promise","resolve","reject","contract","methods","transfer","send","from","err","data","StyledDiv","styled","div","App","useState","isConnected","setIsConnected","userInfo","setUserInfo","windowABC","setWindowABC","setWeb3","setAddress","setContractAddress","useEffect","userData","JSON","parse","sessionStorage","getItem","checkConnectedWallet","ABCLoader","checkWindowABC","setInterval","undefined","window","abc","clearTimeout","onConnect","ABCProvider","provider","console","log","request","method","Web3","getAccounts","userAccount","getChainId","chainId","account","getBalance","ethBalance","utils","fromWei","saveUserInfo","length","balance","connectionid","setItem","stringify","ConnecteButton","className","onClick","open","sendValueTransfer","tx","to","gas","value","sendTransaction","then","receipt","result","testSignPersonalMessage","message","caver","Caver","rpc","klay","sign","result_caver","signer_caver","recover","verified_caver","toLowerCase","testSmartContract","src","imgfile","alt","style","fontWeight","paddingTop","justifyContent","alignItems","display","padding","marginLeft","placeholder","onChange","e","target","removeItem","ReactDOM","render","StrictMode","document","getElementById","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","Error","code","keys","Object","module","exports"],"mappings":"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","file":"static/js/main.1eb878fc.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Frame.e1369206.svg\";","export const KIP7_CONTRACT = {\n  abi: [\n    {\n      constant: true,\n      inputs: [{ internalType: 'address', name: 'account', type: 'address' }],\n      name: 'balanceOf',\n      outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n      payable: false,\n      stateMutability: 'view',\n      type: 'function',\n    },\n    {\n      constant: false,\n      inputs: [\n        { name: 'to', type: 'address' },\n        { name: 'amount', type: 'uint256' },\n      ],\n      name: 'transfer',\n      outputs: [{ name: '', type: 'bool' }],\n      payable: false,\n      stateMutability: 'nonpayable',\n      type: 'function',\n    },\n  ],\n}\n\nexport function getKIP7Contract(web3, contractAddress) {\n  const tokenContract = new web3.eth.Contract(\n    KIP7_CONTRACT.abi,\n    contractAddress\n  )\n  return tokenContract\n}\n\nexport function callTransfer(\n  address,\n  contractAddress,\n  web3\n) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const contract = getKIP7Contract(web3, contractAddress)\n      await contract.methods\n        .transfer(address, '1')\n        .send(\n          { from: address },\n          (err, data) => {\n            if (err) {\n              reject(err)\n            }\n            resolve(data)\n          }\n        )\n    } catch (err) {\n      reject(err)\n    }\n  })\n}","/*****************************************/\n/* Detect the ABC Wallet Ethereum provider */\n/*****************************************/\n\nimport { useState, useEffect } from 'react';\nimport Web3 from 'web3';\nimport ABCProvider from 'abcwallet-extension-provider-api';\nimport Caver from 'caver-js';\nimport styled from 'styled-components'\n\nimport \"./App.css\"\nimport imgfile from './Frame.svg';\nimport { callTransfer } from './Contract';\n\nconst StyledDiv = styled.div`\n  border-bottom: solid black;\n`\n\nfunction App() {\n  const [isConnected, setIsConnected] = useState(false);\n  const [userInfo, setUserInfo] = useState({});\n  const [windowABC, setWindowABC] = useState();\n  const [web3, setWeb3] = useState();\n  const [address, setAddress] = useState('');\n  const [contractAddress, setContractAddress] = useState('');\n\n  // check Connected Wallet\n  useEffect(() => {\n    function checkConnectedWallet() {\n      const userData = JSON.parse(sessionStorage.getItem('userAccount'));\n      if (userData != null) {\n        setUserInfo(userData);\n        setIsConnected(true);\n      }\n    }\n    checkConnectedWallet();\n    ABCLoader()\n  }, []);\n\n  // check ABC Wallect\n  const ABCLoader = () => {\n    let checkWindowABC = setInterval(() =>\n      window.abc !== undefined ? setWindowABC(true) : setWindowABC(false), 1000);\n    return () => { clearTimeout(checkWindowABC) }\n  }\n\n  const onConnect = async () => {\n    try {\n      // this returns the provider, or null if it wasn't detected\n      const provider = await ABCProvider();\n      console.log(provider)\n      if (provider) {\n\n        // web3 객체가 있으면 계정 정보를 가져 옵니다. Ethereum에 RPC 요청을 제출하는 데 사용 합니다.\n        await provider.request({ method: 'eth_requestAccounts' });\n\n        // http 에서 동작하는 node 에 연결하기 위해 HttpProvider 를 사용해 web3 객체를 생성 합니다.\n        const web3 = new Web3(provider);\n        setWeb3(web3)\n        const userAccount = await web3.eth.getAccounts();\n\n        const chainId = await web3.eth.getChainId();\n\n        const account = userAccount[0];\n        setAddress(account)\n\n        let ethBalance = await web3.eth.getBalance(account);  // 지갑 잔고를 가져옵니다.\n        ethBalance = web3.utils.fromWei(ethBalance, 'ether'); // 잔액을 Wei로 변환합니다.\n\n        // 유저 정보를 state에 저장합니다.\n        saveUserInfo(ethBalance, account, chainId);\n        if (userAccount.length === 0) {\n          console.log('ABC Wallet 과 연동 하세요');\n        }\n      }\n    } catch (err) {\n      console.log(\n        '계정을 가져오는 동안 오류가 발생했습니다. 이더리움 클라이언트가 올바르게 구성되었는지 확인하십시오.'\n      );\n    }\n  };\n\n  // 연동해지\n  const onDisconnect = () => {\n    window.sessionStorage.removeItem('userAccount');\n    setUserInfo({});\n    setIsConnected(false);\n  }\n\n  // 유저정보\n  const saveUserInfo = (ethBalance, account, chainId) => {\n    const userAccount = {\n      account: account,\n      balance: ethBalance,\n      connectionid: chainId,\n    };\n    window.sessionStorage.setItem('userAccount', JSON.stringify(userAccount)); //유지될 사용자 데이터\n    const userData = JSON.parse(sessionStorage.getItem('userAccount'));\n    setUserInfo(userData);\n    setIsConnected(true);\n  };\n\n  const ConnecteButton = () => (\n    windowABC === undefined\n      ? <button className=\"disconnect-button\" >\n        Loading ABC Wallet\n      </button>\n      : (windowABC === true\n        ? <button className=\"connect-button\" onClick={onConnect}>\n          Connect to ABC Wallet\n        </button>\n        : <button className=\"connect-button\" onClick={() => window.open('https://chrome.google.com/webstore/detail/abc-wallet/mlhakagmgkmonhdonhkpjeebfphligng?hl=ko&', '_blank')}>Download ABC Wallet\n        </button>\n      )\n  )\n\n  const sendValueTransfer = async () => {\n    try {\n      const tx = {\n        from : address,\n        to: address,\n        gas: 21000,\n        value: 10**18,\n      }\n\n      const result = await web3.eth\n        .sendTransaction(tx)\n        .then((receipt) => {\n          return receipt\n        })\n        console.log(result)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  const testSignPersonalMessage = async () => {\n    try {\n      const message = 'My email is john@doe.com - 1537836206101'\n\n      const caver = new Caver(window.abc)\n      const result_caver = await caver.rpc.klay.sign(address, message)\n      const signer_caver = caver.utils.recover(message, result_caver)\n      const verified_caver= signer_caver.toLowerCase() === address.toLowerCase()\n      console.log(verified_caver)\n      // const result = await web3.eth.personal.sign(message, address, '')\n      // const signer = await web3.eth.personal.ecRecover(message, result)\n      // const verified = signer.toLowerCase() === address.toLowerCase()\n\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  const testSmartContract = async () => {\n    try {\n      const result = await callTransfer(\n        address,\n        contractAddress,\n        web3\n      )\n      console.log(result)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n\n  return (\n    <>\n      <div className=\"app\">\n        <img src={imgfile} alt=\"imgfile\" />\n        <div className=\"app-wrapper\">\n          <div className=\"app-header\">\n            <h1 style={{ fontWeight: 'normal' }}> <b>ABC Wallet</b> Provider API Demo</h1>\n          </div>\n          {!isConnected && <ConnecteButton />}\n        </div>\n        {\n          isConnected && (\n            <>\n              <div className=\"data-wrapper\">\n                <div className='completed'><b>Successfully connected to wallet address</b></div>\n                <h2 className=\"app-details\">\n                  {userInfo.account}\n                </h2>\n                <h2 className=\"app-details\">\n                  Balance: {userInfo.balance}\n                </h2>\n                <h2 className=\"app-details\">\n                  Connection Id: {userInfo.connectionid}\n                </h2>\n              </div>\n              <StyledDiv>\n                <button className = \"disconnect-button\" onClick={testSignPersonalMessage}>\n                  Sign Message\n                </button>\n              </StyledDiv>\n              <StyledDiv>\n                <button className = \"disconnect-button\" onClick={sendValueTransfer}>\n                  Send Value Transfer Tx\n                </button>\n              </StyledDiv>\n              <StyledDiv>\n                <div style={{paddingTop: 10, justifyContent: 'center', alignItems: 'center', display: 'flex'}}>\n                  <label>Token Contract Address: </label>\n                  <input\n                    style={{padding: '10px', marginLeft: 5}}\n                    placeholder='Token Address'\n                    value={contractAddress}\n                    onChange={e=>setContractAddress(e.target.value)}/>\n                </div>\n                <div>\n                  <button className = \"disconnect-button\" onClick={testSmartContract}>\n                    KIP7/ERC20 Transfer\n                  </button>\n                </div>\n              </StyledDiv>\n              <StyledDiv>\n                <button className=\"disconnect-button\" onClick={onDisconnect}>\n                  Disconnect\n                </button>\n              </StyledDiv>\n            </>\n          )\n        }\n      </div >\n    </>\n  );\n}\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","var map = {\n\t\"./caver-abi/src/index.js\": 97,\n\t\"./caver-account/src/index.js\": 55,\n\t\"./caver-contract/src/index.js\": 67,\n\t\"./caver-core-helpers/src/index.js\": 29,\n\t\"./caver-core-method/src/index.js\": 49,\n\t\"./caver-core-requestmanager/caver-providers-http/src/index.js\": 298,\n\t\"./caver-core-requestmanager/caver-providers-ipc/src/index.js\": 308,\n\t\"./caver-core-requestmanager/caver-providers-ws/src/index.js\": 297,\n\t\"./caver-core-requestmanager/src/index.js\": 295,\n\t\"./caver-core-subscriptions/src/index.js\": 89,\n\t\"./caver-core/src/index.js\": 38,\n\t\"./caver-ipfs/src/index.js\": 312,\n\t\"./caver-kct/src/index.js\": 439,\n\t\"./caver-klay/caver-klay-accounts/src/index.js\": 442,\n\t\"./caver-klay/caver-klay-personal/src/index.js\": 445,\n\t\"./caver-klay/src/index.js\": 446,\n\t\"./caver-middleware/src/index.js\": 162,\n\t\"./caver-net/src/index.js\": 231,\n\t\"./caver-rpc/src/index.js\": 447,\n\t\"./caver-rtm/src/index.js\": 96,\n\t\"./caver-transaction/src/index.js\": 448,\n\t\"./caver-utils/iban/src/index.js\": 291,\n\t\"./caver-utils/promievent/src/index.js\": 290,\n\t\"./caver-utils/src/index.js\": 8,\n\t\"./caver-validator/src/index.js\": 449,\n\t\"./caver-wallet/src/index.js\": 185\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 468;"],"sourceRoot":""}